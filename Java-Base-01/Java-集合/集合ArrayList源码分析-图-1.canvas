{
	"nodes":[
		{"id":"792f0048d673bd54","x":-936,"y":1190,"width":2176,"height":640,"type":"group","label":"æ ¸å¿ƒçº½å¸¦"},
		{"id":"eaaff82e77649172","type":"text","text":"```mermaid\ngraph LR\nA(å¼€å§‹) --> B(åˆ›å»ºArrayListå¯¹è±¡)\nB --> C(æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹)\nC -- æ˜¯ --> D(æ‰©å®¹æ•°ç»„)\nD --> E(å°†å…ƒç´ æ·»åŠ åˆ°æ•°ç»„æœ«å°¾)\nE --> F(æ›´æ–°ArrayListçš„size)\nF --> G(ç»“æŸ)\nC -- å¦ --> E\n```\n```mermaid\nsequenceDiagram\nparticipant User\nparticipant ArrayList\nUser -> ArrayList: åˆ›å»ºArrayListå¯¹è±¡\nUser -> ArrayList: æ·»åŠ å…ƒç´ \nArrayList -> ArrayList: æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹\nArrayList --> ArrayList: æ‰©å®¹æ•°ç»„\nArrayList --> ArrayList: å°†å…ƒç´ æ·»åŠ åˆ°æ•°ç»„æœ«å°¾\nArrayList --> ArrayList: æ›´æ–°ArrayListçš„size\nArrayList --> User: è¿”å›æ·»åŠ æˆåŠŸ\n```\n","x":1320,"y":1000,"width":1264,"height":1020},
		{"id":"7d7afda40f4f6a39","type":"text","text":"## (size+1 ) è¡¨ç¤ºæ·»åŠ ç©å…ƒç´ ä¹‹åçš„æœ€å°å®¹é‡(minCapacity),å³sizeé›†åˆçš„å¤§å°,ä¸æ˜¯ä¸‹ä¸€ä¸ªåº”è¯¥æ’å…¥indexä½ç½®æ¶µä¹‰\n\n```java\nprivate Object[] grow() {  \n    return grow(size + 1); //æŠŠç°æœ‰çš„ä¸ªæ•° + 1 ,å³ 0 +1 =1\n}\n```","x":-916,"y":860,"width":824,"height":240},
		{"id":"e20d291deae4991a","x":-916,"y":380,"width":824,"height":340,"type":"text","text":"```java\n/**  \n * This helper method split out from add(E) to keep method * bytecode size under 35 (the -XX:MaxInlineSize default value), * which helps when add(E) is called in a C1-compiled loop. */private void add(E e, Object[] elementData, int s) {  \n    if (s == elementData.length)  \n        elementData = grow();  \n    //åŸå§‹æ•°ç»„ã€æ²¡æ»¡ã€‘,è€Œä¸éœ€è¦æ‰©å®¹,ç›´æ¥æ·»åŠ å…ƒç´ \n    elementData[s] = e;  \n    size = s + 1;  \n}\n\n```"},
		{"id":"1cc36b1e4c4241a5","type":"text","text":"```java\n\n/**  \n * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * * @param minCapacity the desired minimum capacity  \n * @throws OutOfMemoryError if minCapacity is less than zero  \n */\n private Object[] grow(int minCapacity) {  \n    int oldCapacity = elementData.length;  \n\n    if (oldCapacity > 0 || elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {  \n\t    //newCapacity ä½œç”¨: ç¡®è®¤æ•°ç»„æ–°å¢çš„å®é™…é•¿åº¦,å®é™…é•¿åº¦åŒ…å«(åŸé•¿åº¦)\n        int newCapacity = ArraysSupport.newLength(oldCapacity,  \n                minCapacity - oldCapacity, /* minimum growth */  \n                oldCapacity >> 1           /* preferred growth */);  \n        return elementData = Arrays.copyOf(elementData, newCapacity);  \n    } else {  \n\t    //å½“åˆå§‹æ•°ç»„é•¿åº¦ä¸º0æ—¶,newä¸€ä¸ªé»˜è®¤10å¤§å°çš„æ•°ç»„,å¦‚æœå®é™…æ’å…¥çš„å¤§å°å¤§äº10,åˆ™ä»¥minCapacityå®é™…ä¸ºå‡†\n        return elementData = new Object[Math.max(DEFAULT_CAPACITY, minCapacity)];  \n    }  \n}  \n  \n\n```","x":-916,"y":1210,"width":880,"height":600,"color":"1"},
		{"id":"637a908d1d730635","type":"text","text":"- æœ€åå¾—åˆ°`minCapacity`: **åŸæ¥`è€æ•°ç»„`çš„å®é™…é•¿åº¦ + (ç¨‹åºå‘˜)æ·»åŠ å…ƒç´ çš„æ€»ä¸ªæ•°**  ---å¦‚æœè¶…è¿‡æ•°ç»„é•¿åº¦çš„æœ€å¤§å€¼ 2^32å°±è®¾ç½®æˆ2^32\n\t- æ–¹æ³•çš„`ArraysSupport.newLength(oldCapacity,  minCapacity -oldCapacity,oldCapacity >> 1); `å‚æ•°\n\t- oldCapacity: **åŸæ¥`è€æ•°ç»„`çš„çš„æœ€å¤§å®¹é‡**\n\t- minCapacity - oldCapacity, **è‡³å°‘éœ€è¦æ–°å¢çš„å®¹é‡,ä»¥å®é™…ä¸ºä¸»** æœ€å°çš„å¢é•¿é‡ï¼Œå³è‡³å°‘è¦å¢é•¿å¤šå°‘é•¿åº¦ã€‚\n\t- oldCapacity >> 1   //**Java,é»˜è®¤æ–°å¢å®¹é‡ä¸ºåŸæ¥çš„1.5å€** \n\t\t- oldCapacity >> 1 å³- `prefGrowth`: é¦–é€‰çš„å¢é•¿é‡ï¼Œå³ç¨‹åºåå¥½çš„å¢é•¿é•¿åº¦ã€‚\n\n## Arrays.copyOf(elementData, newCapacity);ä½œç”¨\nreturn elementData = Arrays.copyOf(elementData, newCapacity{**Tips : int, æ–°å¢çš„å®é™…é•¿åº¦**}  );  \n//ä½œç”¨: æ‹·è´æ•°ç»„`åŸelementDataçš„æ•°æ®åˆ°`æ–°çš„æ•°ç»„ä¸­, `newCapacity`å®é™…**æ–°å»ºçš„æ•°ç»„é•¿åº¦**","x":340,"y":1296,"width":880,"height":429,"color":"1"},
		{"id":"f7f1e922af448b07","type":"text","text":"```java\npublic static int newLength(int oldLength, int minGrowth, int prefGrowth) {  \n    // preconditions not checked because of inlining  \n    // assert oldLength >= 0    // assert minGrowth > 0\n    //  ğŸ‘‰ğŸ‘‰å³è¾¹è§£é‡Š\n    int prefLength = oldLength + Math.max(minGrowth, prefGrowth); // might overflow  \n    if (0 < prefLength && prefLength <= SOFT_MAX_ARRAY_LENGTH) {  \n        return prefLength;  \n    } else {  \n        // put code cold in a separate method  \n        return hugeLength(oldLength, minGrowth);  \n    }  \n}\n```","x":-916,"y":2120,"width":919,"height":355},
		{"id":"0a7f2b4c5b3056fe","type":"text","text":"# public static int newLength(**int oldLength**, **int minGrowth**, int prefGrowth)æ–¹æ³•çš„ä½œç”¨\n## ç¬¬ä¸€ç§æƒ…å†µï¼šå¦‚æœä¸€æ¬¡æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°`minGrowth`ä¸€å®šæ˜¯1ï¼Œè¡¨ç¤ºæ­¤æ—¶æ•°ç»„åªè¦æ‰©å®¹1ä¸ªå•ä½å°±å¯ä»¥äº†ã€‚\n## ç¬¬äºŒç§æƒ…å†µï¼šå¦‚æœä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œå‡è®¾100.é‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°`minGrowth`æ˜¯100ï¼Œè¡¨ç¤ºæ­¤æ—¶æ•°ç»„éœ€è¦æ‰©å®¹100ä¸ªå•ä½æ‰å¯ä»¥,**ä¸æŒ‰ç…§é»˜è®¤çš„1.5å€æ‰©å®¹**","x":203,"y":2120,"width":700,"height":355,"color":"1"},
		{"id":"8d2f965d7ddc2603","type":"text","text":"` modCount++;  `\n\nåœ¨è¿™æ®µä»£ç ä¸­ï¼Œ`modCount` æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®°å½•åˆ—è¡¨è¢«ä¿®æ”¹çš„æ¬¡æ•°ã€‚é€šå¸¸åœ¨ Java çš„é›†åˆç±»ä¸­ï¼Œä¾‹å¦‚ `ArrayList`ï¼Œ`modCount` æ˜¯ç”¨æ¥æ”¯æŒå¹¶å‘ä¿®æ”¹æ£€æµ‹çš„æœºåˆ¶ä¹‹ä¸€ã€‚\n\nå…·ä½“æ¥è¯´ï¼š\n- å½“åˆ—è¡¨ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæ¯”å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ï¼Œ`modCount` ä¼šå¢åŠ ã€‚\n- å½“è¿›è¡Œè¿­ä»£æ“ä½œæ—¶ï¼Œä¼šæ£€æŸ¥å½“å‰çš„ `modCount` æ˜¯å¦å’Œè¿­ä»£å¼€å§‹æ—¶è®°å½•çš„ `expectedModCount` ç›¸ç­‰ï¼Œä»¥æ­¤æ¥åˆ¤æ–­åœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†åˆ—è¡¨ï¼Œä»è€Œé¿å…å¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼ˆConcurrentModificationExceptionï¼‰çš„å‘ç”Ÿã€‚\n\nåœ¨ä½ æä¾›çš„ä»£ç ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨ `add(E e)` æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šå¢åŠ  `modCount` çš„å€¼ï¼Œä»¥åæ˜ åˆ—è¡¨çš„ä¿®æ”¹çŠ¶æ€ã€‚**","x":-176,"y":-430,"width":580,"height":379,"color":"1"},
		{"id":"8d9b1928de37f9e1","type":"text","text":"`e`å‚æ•°ä¸€ï¼šå½“å‰è¦æ·»åŠ çš„å…ƒç´ ï¼›\n`elementData`å‚æ•°äºŒï¼šé›†åˆåº•å±‚çš„æ•°ç»„åå­—\n`size` å‚æ•°ä¸‰ï¼š**é›†åˆçš„é•¿åº¦/å½“å‰å…ƒç´ åº”å­˜å…¥çš„ä½ç½®**","x":-176,"y":-23,"width":558,"height":105,"color":"1"},
		{"id":"524b6f8add416e77","x":624,"y":-99,"width":676,"height":359,"type":"text","text":"| å…ƒç´           | ç´¢å¼•       | **size æ¶µä¹‰: â‘ é›†åˆçš„é•¿åº¦ â‘¡ä¸‹ä¸€ä¸ªåº”è¯¥æ’å…¥indexä½ç½®** |\n| ----------- | -------- | ----------------------------------- |\n| 00          | `{ }`ç©ºæ•°ç»„ | 0                                   |\n| 10          | 0        | 1                                   |\n| 20          | 1        | 2                                   |\n| 30          | 2        | 3                                   |\n| 40          | 3        | 4                                   |\n| 50          | 4        | 5                                   |\n| ........... |          |                                     |\n| 100         | 9        | **10**                              |\n| 110         | 10       | **11**                              |\n"},
		{"id":"405334f9d00e4822","type":"text","text":"```java\ntransient Object[] elementData; // non-private to simplify nested class access\n\n```","x":-916,"y":-640,"width":620,"height":140,"color":"1"},
		{"id":"12d8ddf17b823215","type":"text","text":"```java\n\n/**  \n * The size of the ArrayList (the number of elements it contains). * * @serial  \n */  \nprivate int size;\n```","x":-916,"y":-480,"width":620,"height":157},
		{"id":"7c34908c0f7e7047","type":"text","text":"```java\npublic ArrayList() {  \n    this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;  \n}\n```\n","x":-916,"y":-303,"width":620,"height":124,"color":"4"},
		{"id":"26f1182623994bbb","type":"text","text":"```java\n * Appends the specified element to the end of this list. * * @param e element to be appended to this list  \n * @return {@code true} (as specified by {@link Collection#add})  \n **/\n\n public boolean add(E e) {  \n    modCount++;  \n    add(e, elementData, size);  \n    return true;  \n/*\n\tadd(e, elementData, size);\n\tå‚æ•°ä¸€ï¼šå½“å‰è¦æ·»åŠ çš„å…ƒç´ ï¼›\n\tå‚æ•°äºŒï¼šé›†åˆåº•å±‚çš„æ•°ç»„åå­—\n\tå‚æ•°ä¸‰ï¼šé›†åˆçš„é•¿åº¦/å½“å‰å…ƒç´ åº”å­˜å…¥çš„ä½ç½®\n*/\n}\n```  ","x":-916,"y":-159,"width":620,"height":320,"color":"6"},
		{"id":"de60d8b5ba93a4e3","type":"text","text":"## ArrayList:é›†åˆåº•å±‚åŸç†\n### â‘ åˆ©ç”¨ç©ºå‚åˆ›å»ºçš„é›†åˆï¼Œåœ¨åº•å±‚åˆ›å»ºä¸€ä¸ªé»˜è®¤é•¿åº¦ä¸º0çš„æ•°ç»„\n### â‘¡æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œåº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•¿åº¦ä¸º10çš„æ•°ç»„\n### â‘¢å­˜æ»¡æ—¶ï¼Œä¼šæ‰©å®¹1.5å€\n### â‘£å¦‚æœä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œ1.5å€è¿˜æ”¾ä¸ä¸‹ï¼Œåˆ™æ–°åˆ›å»ºæ•°ç»„çš„é•¿åº¦ä»¥å®é™…ä¸ºå‡†","x":-336,"y":-1280,"width":900,"height":340,"color":"5"},
		{"id":"a5e34a529d66181e","x":1752,"y":-590,"width":400,"height":350,"color":"2","type":"text","text":"# è´¯å½»çš„æ€ç»´æŒ‡å¯¼\n\n## **å¤šé‡è§£é‡Šèƒ½åŠ›,è§’åº¦ä¸€ä¸€å¯¹åº”çš„é€‚åº”æ€§æ€ç»´**\nä¸åŒåœºæ™¯,é€‚ç”¨ä¸åŒçš„è§£é‡Š,ä¸è¦æ··æ·†äº†.è¦ä¸€ä¸€å¯¹åº”"}
	],
	"edges":[
		{"id":"8a2b30a9b265dad4","fromNode":"26f1182623994bbb","fromSide":"right","toNode":"8d9b1928de37f9e1","toSide":"left"},
		{"id":"80c7c2a63b7bd8f8","fromNode":"1cc36b1e4c4241a5","fromSide":"right","toNode":"637a908d1d730635","toSide":"left"},
		{"id":"094646da46025e1e","fromNode":"f7f1e922af448b07","fromSide":"right","toNode":"0a7f2b4c5b3056fe","toSide":"left"},
		{"id":"c48a8732b780c493","fromNode":"26f1182623994bbb","fromSide":"right","toNode":"8d2f965d7ddc2603","toSide":"left"},
		{"id":"33da87b9ed4fb4b1","fromNode":"8d9b1928de37f9e1","fromSide":"right","toNode":"524b6f8add416e77","toSide":"left"},
		{"id":"cbee47104bdaa375","fromNode":"e20d291deae4991a","fromSide":"bottom","toNode":"7d7afda40f4f6a39","toSide":"top"},
		{"id":"66927e7e74ae55d2","fromNode":"a5e34a529d66181e","fromSide":"left","toNode":"524b6f8add416e77","toSide":"right"}
	]
}